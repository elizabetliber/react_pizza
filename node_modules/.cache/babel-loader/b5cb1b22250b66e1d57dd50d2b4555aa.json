{"ast":null,"code":"'use strict';\n\nvar PENDING = 'pending';\nvar SETTLED = 'settled';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\n\nvar NOOP = function () {};\n\nvar isNode = typeof global !== 'undefined' && typeof global.process !== 'undefined' && typeof global.process.emit === 'function';\nvar asyncSetTimer = typeof setImmediate === 'undefined' ? setTimeout : setImmediate;\nvar asyncQueue = [];\nvar asyncTimer;\n\nfunction asyncFlush() {\n  // run promise callbacks\n  for (var i = 0; i < asyncQueue.length; i++) {\n    asyncQueue[i][0](asyncQueue[i][1]);\n  } // reset async asyncQueue\n\n\n  asyncQueue = [];\n  asyncTimer = false;\n}\n\nfunction asyncCall(callback, arg) {\n  asyncQueue.push([callback, arg]);\n\n  if (!asyncTimer) {\n    asyncTimer = true;\n    asyncSetTimer(asyncFlush, 0);\n  }\n}\n\nfunction invokeResolver(resolver, promise) {\n  function resolvePromise(value) {\n    resolve(promise, value);\n  }\n\n  function rejectPromise(reason) {\n    reject(promise, reason);\n  }\n\n  try {\n    resolver(resolvePromise, rejectPromise);\n  } catch (e) {\n    rejectPromise(e);\n  }\n}\n\nfunction invokeCallback(subscriber) {\n  var owner = subscriber.owner;\n  var settled = owner._state;\n  var value = owner._data;\n  var callback = subscriber[settled];\n  var promise = subscriber.then;\n\n  if (typeof callback === 'function') {\n    settled = FULFILLED;\n\n    try {\n      value = callback(value);\n    } catch (e) {\n      reject(promise, e);\n    }\n  }\n\n  if (!handleThenable(promise, value)) {\n    if (settled === FULFILLED) {\n      resolve(promise, value);\n    }\n\n    if (settled === REJECTED) {\n      reject(promise, value);\n    }\n  }\n}\n\nfunction handleThenable(promise, value) {\n  var resolved;\n\n  try {\n    if (promise === value) {\n      throw new TypeError('A promises callback cannot return that same promise.');\n    }\n\n    if (value && (typeof value === 'function' || typeof value === 'object')) {\n      // then should be retrieved only once\n      var then = value.then;\n\n      if (typeof then === 'function') {\n        then.call(value, function (val) {\n          if (!resolved) {\n            resolved = true;\n\n            if (value === val) {\n              fulfill(promise, val);\n            } else {\n              resolve(promise, val);\n            }\n          }\n        }, function (reason) {\n          if (!resolved) {\n            resolved = true;\n            reject(promise, reason);\n          }\n        });\n        return true;\n      }\n    }\n  } catch (e) {\n    if (!resolved) {\n      reject(promise, e);\n    }\n\n    return true;\n  }\n\n  return false;\n}\n\nfunction resolve(promise, value) {\n  if (promise === value || !handleThenable(promise, value)) {\n    fulfill(promise, value);\n  }\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state === PENDING) {\n    promise._state = SETTLED;\n    promise._data = value;\n    asyncCall(publishFulfillment, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state === PENDING) {\n    promise._state = SETTLED;\n    promise._data = reason;\n    asyncCall(publishRejection, promise);\n  }\n}\n\nfunction publish(promise) {\n  promise._then = promise._then.forEach(invokeCallback);\n}\n\nfunction publishFulfillment(promise) {\n  promise._state = FULFILLED;\n  publish(promise);\n}\n\nfunction publishRejection(promise) {\n  promise._state = REJECTED;\n  publish(promise);\n\n  if (!promise._handled && isNode) {\n    global.process.emit('unhandledRejection', promise._data, promise);\n  }\n}\n\nfunction notifyRejectionHandled(promise) {\n  global.process.emit('rejectionHandled', promise);\n}\n/**\n * @class\n */\n\n\nfunction Promise(resolver) {\n  if (typeof resolver !== 'function') {\n    throw new TypeError('Promise resolver ' + resolver + ' is not a function');\n  }\n\n  if (this instanceof Promise === false) {\n    throw new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n  }\n\n  this._then = [];\n  invokeResolver(resolver, this);\n}\n\nPromise.prototype = {\n  constructor: Promise,\n  _state: PENDING,\n  _then: null,\n  _data: undefined,\n  _handled: false,\n  then: function (onFulfillment, onRejection) {\n    var subscriber = {\n      owner: this,\n      then: new this.constructor(NOOP),\n      fulfilled: onFulfillment,\n      rejected: onRejection\n    };\n\n    if ((onRejection || onFulfillment) && !this._handled) {\n      this._handled = true;\n\n      if (this._state === REJECTED && isNode) {\n        asyncCall(notifyRejectionHandled, this);\n      }\n    }\n\n    if (this._state === FULFILLED || this._state === REJECTED) {\n      // already resolved, call callback async\n      asyncCall(invokeCallback, subscriber);\n    } else {\n      // subscribe\n      this._then.push(subscriber);\n    }\n\n    return subscriber.then;\n  },\n  catch: function (onRejection) {\n    return this.then(null, onRejection);\n  }\n};\n\nPromise.all = function (promises) {\n  if (!Array.isArray(promises)) {\n    throw new TypeError('You must pass an array to Promise.all().');\n  }\n\n  return new Promise(function (resolve, reject) {\n    var results = [];\n    var remaining = 0;\n\n    function resolver(index) {\n      remaining++;\n      return function (value) {\n        results[index] = value;\n\n        if (! --remaining) {\n          resolve(results);\n        }\n      };\n    }\n\n    for (var i = 0, promise; i < promises.length; i++) {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function') {\n        promise.then(resolver(i), reject);\n      } else {\n        results[i] = promise;\n      }\n    }\n\n    if (!remaining) {\n      resolve(results);\n    }\n  });\n};\n\nPromise.race = function (promises) {\n  if (!Array.isArray(promises)) {\n    throw new TypeError('You must pass an array to Promise.race().');\n  }\n\n  return new Promise(function (resolve, reject) {\n    for (var i = 0, promise; i < promises.length; i++) {\n      promise = promises[i];\n\n      if (promise && typeof promise.then === 'function') {\n        promise.then(resolve, reject);\n      } else {\n        resolve(promise);\n      }\n    }\n  });\n};\n\nPromise.resolve = function (value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function (resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function (reason) {\n  return new Promise(function (resolve, reject) {\n    reject(reason);\n  });\n};\n\nmodule.exports = Promise;","map":{"version":3,"sources":["/home/lisa/VSProjects/react-pizza/react_pizza/node_modules/pinkie/index.js"],"names":["PENDING","SETTLED","FULFILLED","REJECTED","NOOP","isNode","global","process","emit","asyncSetTimer","setImmediate","setTimeout","asyncQueue","asyncTimer","asyncFlush","i","length","asyncCall","callback","arg","push","invokeResolver","resolver","promise","resolvePromise","value","resolve","rejectPromise","reason","reject","e","invokeCallback","subscriber","owner","settled","_state","_data","then","handleThenable","resolved","TypeError","call","val","fulfill","publishFulfillment","publishRejection","publish","_then","forEach","_handled","notifyRejectionHandled","Promise","prototype","constructor","undefined","onFulfillment","onRejection","fulfilled","rejected","catch","all","promises","Array","isArray","results","remaining","index","race","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar PENDING = 'pending';\nvar SETTLED = 'settled';\nvar FULFILLED = 'fulfilled';\nvar REJECTED = 'rejected';\nvar NOOP = function () {};\nvar isNode = typeof global !== 'undefined' && typeof global.process !== 'undefined' && typeof global.process.emit === 'function';\n\nvar asyncSetTimer = typeof setImmediate === 'undefined' ? setTimeout : setImmediate;\nvar asyncQueue = [];\nvar asyncTimer;\n\nfunction asyncFlush() {\n\t// run promise callbacks\n\tfor (var i = 0; i < asyncQueue.length; i++) {\n\t\tasyncQueue[i][0](asyncQueue[i][1]);\n\t}\n\n\t// reset async asyncQueue\n\tasyncQueue = [];\n\tasyncTimer = false;\n}\n\nfunction asyncCall(callback, arg) {\n\tasyncQueue.push([callback, arg]);\n\n\tif (!asyncTimer) {\n\t\tasyncTimer = true;\n\t\tasyncSetTimer(asyncFlush, 0);\n\t}\n}\n\nfunction invokeResolver(resolver, promise) {\n\tfunction resolvePromise(value) {\n\t\tresolve(promise, value);\n\t}\n\n\tfunction rejectPromise(reason) {\n\t\treject(promise, reason);\n\t}\n\n\ttry {\n\t\tresolver(resolvePromise, rejectPromise);\n\t} catch (e) {\n\t\trejectPromise(e);\n\t}\n}\n\nfunction invokeCallback(subscriber) {\n\tvar owner = subscriber.owner;\n\tvar settled = owner._state;\n\tvar value = owner._data;\n\tvar callback = subscriber[settled];\n\tvar promise = subscriber.then;\n\n\tif (typeof callback === 'function') {\n\t\tsettled = FULFILLED;\n\t\ttry {\n\t\t\tvalue = callback(value);\n\t\t} catch (e) {\n\t\t\treject(promise, e);\n\t\t}\n\t}\n\n\tif (!handleThenable(promise, value)) {\n\t\tif (settled === FULFILLED) {\n\t\t\tresolve(promise, value);\n\t\t}\n\n\t\tif (settled === REJECTED) {\n\t\t\treject(promise, value);\n\t\t}\n\t}\n}\n\nfunction handleThenable(promise, value) {\n\tvar resolved;\n\n\ttry {\n\t\tif (promise === value) {\n\t\t\tthrow new TypeError('A promises callback cannot return that same promise.');\n\t\t}\n\n\t\tif (value && (typeof value === 'function' || typeof value === 'object')) {\n\t\t\t// then should be retrieved only once\n\t\t\tvar then = value.then;\n\n\t\t\tif (typeof then === 'function') {\n\t\t\t\tthen.call(value, function (val) {\n\t\t\t\t\tif (!resolved) {\n\t\t\t\t\t\tresolved = true;\n\n\t\t\t\t\t\tif (value === val) {\n\t\t\t\t\t\t\tfulfill(promise, val);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(promise, val);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, function (reason) {\n\t\t\t\t\tif (!resolved) {\n\t\t\t\t\t\tresolved = true;\n\n\t\t\t\t\t\treject(promise, reason);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\tif (!resolved) {\n\t\t\treject(promise, e);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction resolve(promise, value) {\n\tif (promise === value || !handleThenable(promise, value)) {\n\t\tfulfill(promise, value);\n\t}\n}\n\nfunction fulfill(promise, value) {\n\tif (promise._state === PENDING) {\n\t\tpromise._state = SETTLED;\n\t\tpromise._data = value;\n\n\t\tasyncCall(publishFulfillment, promise);\n\t}\n}\n\nfunction reject(promise, reason) {\n\tif (promise._state === PENDING) {\n\t\tpromise._state = SETTLED;\n\t\tpromise._data = reason;\n\n\t\tasyncCall(publishRejection, promise);\n\t}\n}\n\nfunction publish(promise) {\n\tpromise._then = promise._then.forEach(invokeCallback);\n}\n\nfunction publishFulfillment(promise) {\n\tpromise._state = FULFILLED;\n\tpublish(promise);\n}\n\nfunction publishRejection(promise) {\n\tpromise._state = REJECTED;\n\tpublish(promise);\n\tif (!promise._handled && isNode) {\n\t\tglobal.process.emit('unhandledRejection', promise._data, promise);\n\t}\n}\n\nfunction notifyRejectionHandled(promise) {\n\tglobal.process.emit('rejectionHandled', promise);\n}\n\n/**\n * @class\n */\nfunction Promise(resolver) {\n\tif (typeof resolver !== 'function') {\n\t\tthrow new TypeError('Promise resolver ' + resolver + ' is not a function');\n\t}\n\n\tif (this instanceof Promise === false) {\n\t\tthrow new TypeError('Failed to construct \\'Promise\\': Please use the \\'new\\' operator, this object constructor cannot be called as a function.');\n\t}\n\n\tthis._then = [];\n\n\tinvokeResolver(resolver, this);\n}\n\nPromise.prototype = {\n\tconstructor: Promise,\n\n\t_state: PENDING,\n\t_then: null,\n\t_data: undefined,\n\t_handled: false,\n\n\tthen: function (onFulfillment, onRejection) {\n\t\tvar subscriber = {\n\t\t\towner: this,\n\t\t\tthen: new this.constructor(NOOP),\n\t\t\tfulfilled: onFulfillment,\n\t\t\trejected: onRejection\n\t\t};\n\n\t\tif ((onRejection || onFulfillment) && !this._handled) {\n\t\t\tthis._handled = true;\n\t\t\tif (this._state === REJECTED && isNode) {\n\t\t\t\tasyncCall(notifyRejectionHandled, this);\n\t\t\t}\n\t\t}\n\n\t\tif (this._state === FULFILLED || this._state === REJECTED) {\n\t\t\t// already resolved, call callback async\n\t\t\tasyncCall(invokeCallback, subscriber);\n\t\t} else {\n\t\t\t// subscribe\n\t\t\tthis._then.push(subscriber);\n\t\t}\n\n\t\treturn subscriber.then;\n\t},\n\n\tcatch: function (onRejection) {\n\t\treturn this.then(null, onRejection);\n\t}\n};\n\nPromise.all = function (promises) {\n\tif (!Array.isArray(promises)) {\n\t\tthrow new TypeError('You must pass an array to Promise.all().');\n\t}\n\n\treturn new Promise(function (resolve, reject) {\n\t\tvar results = [];\n\t\tvar remaining = 0;\n\n\t\tfunction resolver(index) {\n\t\t\tremaining++;\n\t\t\treturn function (value) {\n\t\t\t\tresults[index] = value;\n\t\t\t\tif (!--remaining) {\n\t\t\t\t\tresolve(results);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tfor (var i = 0, promise; i < promises.length; i++) {\n\t\t\tpromise = promises[i];\n\n\t\t\tif (promise && typeof promise.then === 'function') {\n\t\t\t\tpromise.then(resolver(i), reject);\n\t\t\t} else {\n\t\t\t\tresults[i] = promise;\n\t\t\t}\n\t\t}\n\n\t\tif (!remaining) {\n\t\t\tresolve(results);\n\t\t}\n\t});\n};\n\nPromise.race = function (promises) {\n\tif (!Array.isArray(promises)) {\n\t\tthrow new TypeError('You must pass an array to Promise.race().');\n\t}\n\n\treturn new Promise(function (resolve, reject) {\n\t\tfor (var i = 0, promise; i < promises.length; i++) {\n\t\t\tpromise = promises[i];\n\n\t\t\tif (promise && typeof promise.then === 'function') {\n\t\t\t\tpromise.then(resolve, reject);\n\t\t\t} else {\n\t\t\t\tresolve(promise);\n\t\t\t}\n\t\t}\n\t});\n};\n\nPromise.resolve = function (value) {\n\tif (value && typeof value === 'object' && value.constructor === Promise) {\n\t\treturn value;\n\t}\n\n\treturn new Promise(function (resolve) {\n\t\tresolve(value);\n\t});\n};\n\nPromise.reject = function (reason) {\n\treturn new Promise(function (resolve, reject) {\n\t\treject(reason);\n\t});\n};\n\nmodule.exports = Promise;\n"]},"metadata":{},"sourceType":"script"}