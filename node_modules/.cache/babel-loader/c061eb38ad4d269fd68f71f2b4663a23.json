{"ast":null,"code":"'use strict';\n\nvar zlibpool = exports;\n\nvar zlib = require('zlib');\n\nvar transport = require('../../../spdy-transport'); // TODO(indutny): think about it, why has it always been Z_SYNC_FLUSH here.\n// It should be possible to manually flush stuff after the write instead\n\n\nfunction createDeflate(version, compression) {\n  var deflate = zlib.createDeflate({\n    dictionary: transport.protocol.spdy.dictionary[version],\n    flush: zlib.Z_SYNC_FLUSH,\n    windowBits: 11,\n    level: compression ? zlib.Z_DEFAULT_COMPRESSION : zlib.Z_NO_COMPRESSION\n  }); // For node.js v0.8\n\n  deflate._flush = zlib.Z_SYNC_FLUSH;\n  return deflate;\n}\n\nfunction createInflate(version) {\n  var inflate = zlib.createInflate({\n    dictionary: transport.protocol.spdy.dictionary[version],\n    flush: zlib.Z_SYNC_FLUSH\n  }); // For node.js v0.8\n\n  inflate._flush = zlib.Z_SYNC_FLUSH;\n  return inflate;\n}\n\nfunction Pool(compression) {\n  this.compression = compression;\n  this.pool = {\n    2: [],\n    3: [],\n    3.1: []\n  };\n}\n\nzlibpool.create = function create(compression) {\n  return new Pool(compression);\n};\n\nPool.prototype.get = function get(version) {\n  if (this.pool[version].length > 0) {\n    return this.pool[version].pop();\n  } else {\n    var id = version;\n    return {\n      version: version,\n      compress: createDeflate(id, this.compression),\n      decompress: createInflate(id)\n    };\n  }\n};\n\nPool.prototype.put = function put(pair) {\n  this.pool[pair.version].push(pair);\n};","map":{"version":3,"sources":["/home/lisa/VSProjects/react-pizza/react_pizza/node_modules/spdy-transport/lib/spdy-transport/protocol/spdy/zlib-pool.js"],"names":["zlibpool","exports","zlib","require","transport","createDeflate","version","compression","deflate","dictionary","protocol","spdy","flush","Z_SYNC_FLUSH","windowBits","level","Z_DEFAULT_COMPRESSION","Z_NO_COMPRESSION","_flush","createInflate","inflate","Pool","pool","create","prototype","get","length","pop","id","compress","decompress","put","pair","push"],"mappings":"AAAA;;AAEA,IAAIA,QAAQ,GAAGC,OAAf;;AACA,IAAIC,IAAI,GAAGC,OAAO,CAAC,MAAD,CAAlB;;AAEA,IAAIC,SAAS,GAAGD,OAAO,CAAC,yBAAD,CAAvB,C,CAEA;AACA;;;AACA,SAASE,aAAT,CAAwBC,OAAxB,EAAiCC,WAAjC,EAA8C;AAC5C,MAAIC,OAAO,GAAGN,IAAI,CAACG,aAAL,CAAmB;AAC/BI,IAAAA,UAAU,EAAEL,SAAS,CAACM,QAAV,CAAmBC,IAAnB,CAAwBF,UAAxB,CAAmCH,OAAnC,CADmB;AAE/BM,IAAAA,KAAK,EAAEV,IAAI,CAACW,YAFmB;AAG/BC,IAAAA,UAAU,EAAE,EAHmB;AAI/BC,IAAAA,KAAK,EAAER,WAAW,GAAGL,IAAI,CAACc,qBAAR,GAAgCd,IAAI,CAACe;AAJxB,GAAnB,CAAd,CAD4C,CAQ5C;;AACAT,EAAAA,OAAO,CAACU,MAAR,GAAiBhB,IAAI,CAACW,YAAtB;AAEA,SAAOL,OAAP;AACD;;AAED,SAASW,aAAT,CAAwBb,OAAxB,EAAiC;AAC/B,MAAIc,OAAO,GAAGlB,IAAI,CAACiB,aAAL,CAAmB;AAC/BV,IAAAA,UAAU,EAAEL,SAAS,CAACM,QAAV,CAAmBC,IAAnB,CAAwBF,UAAxB,CAAmCH,OAAnC,CADmB;AAE/BM,IAAAA,KAAK,EAAEV,IAAI,CAACW;AAFmB,GAAnB,CAAd,CAD+B,CAM/B;;AACAO,EAAAA,OAAO,CAACF,MAAR,GAAiBhB,IAAI,CAACW,YAAtB;AAEA,SAAOO,OAAP;AACD;;AAED,SAASC,IAAT,CAAed,WAAf,EAA4B;AAC1B,OAAKA,WAAL,GAAmBA,WAAnB;AACA,OAAKe,IAAL,GAAY;AACV,OAAG,EADO;AAEV,OAAG,EAFO;AAGV,SAAK;AAHK,GAAZ;AAKD;;AAEDtB,QAAQ,CAACuB,MAAT,GAAkB,SAASA,MAAT,CAAiBhB,WAAjB,EAA8B;AAC9C,SAAO,IAAIc,IAAJ,CAASd,WAAT,CAAP;AACD,CAFD;;AAIAc,IAAI,CAACG,SAAL,CAAeC,GAAf,GAAqB,SAASA,GAAT,CAAcnB,OAAd,EAAuB;AAC1C,MAAI,KAAKgB,IAAL,CAAUhB,OAAV,EAAmBoB,MAAnB,GAA4B,CAAhC,EAAmC;AACjC,WAAO,KAAKJ,IAAL,CAAUhB,OAAV,EAAmBqB,GAAnB,EAAP;AACD,GAFD,MAEO;AACL,QAAIC,EAAE,GAAGtB,OAAT;AAEA,WAAO;AACLA,MAAAA,OAAO,EAAEA,OADJ;AAELuB,MAAAA,QAAQ,EAAExB,aAAa,CAACuB,EAAD,EAAK,KAAKrB,WAAV,CAFlB;AAGLuB,MAAAA,UAAU,EAAEX,aAAa,CAACS,EAAD;AAHpB,KAAP;AAKD;AACF,CAZD;;AAcAP,IAAI,CAACG,SAAL,CAAeO,GAAf,GAAqB,SAASA,GAAT,CAAcC,IAAd,EAAoB;AACvC,OAAKV,IAAL,CAAUU,IAAI,CAAC1B,OAAf,EAAwB2B,IAAxB,CAA6BD,IAA7B;AACD,CAFD","sourcesContent":["'use strict'\n\nvar zlibpool = exports\nvar zlib = require('zlib')\n\nvar transport = require('../../../spdy-transport')\n\n// TODO(indutny): think about it, why has it always been Z_SYNC_FLUSH here.\n// It should be possible to manually flush stuff after the write instead\nfunction createDeflate (version, compression) {\n  var deflate = zlib.createDeflate({\n    dictionary: transport.protocol.spdy.dictionary[version],\n    flush: zlib.Z_SYNC_FLUSH,\n    windowBits: 11,\n    level: compression ? zlib.Z_DEFAULT_COMPRESSION : zlib.Z_NO_COMPRESSION\n  })\n\n  // For node.js v0.8\n  deflate._flush = zlib.Z_SYNC_FLUSH\n\n  return deflate\n}\n\nfunction createInflate (version) {\n  var inflate = zlib.createInflate({\n    dictionary: transport.protocol.spdy.dictionary[version],\n    flush: zlib.Z_SYNC_FLUSH\n  })\n\n  // For node.js v0.8\n  inflate._flush = zlib.Z_SYNC_FLUSH\n\n  return inflate\n}\n\nfunction Pool (compression) {\n  this.compression = compression\n  this.pool = {\n    2: [],\n    3: [],\n    3.1: []\n  }\n}\n\nzlibpool.create = function create (compression) {\n  return new Pool(compression)\n}\n\nPool.prototype.get = function get (version) {\n  if (this.pool[version].length > 0) {\n    return this.pool[version].pop()\n  } else {\n    var id = version\n\n    return {\n      version: version,\n      compress: createDeflate(id, this.compression),\n      decompress: createInflate(id)\n    }\n  }\n}\n\nPool.prototype.put = function put (pair) {\n  this.pool[pair.version].push(pair)\n}\n"]},"metadata":{},"sourceType":"script"}