{"ast":null,"code":"'use strict';\n\nvar TOKEN = /([!#\\$%&'\\*\\+\\-\\.\\^_`\\|~0-9A-Za-z]+)/,\n    NOTOKEN = /([^!#\\$%&'\\*\\+\\-\\.\\^_`\\|~0-9A-Za-z])/g,\n    QUOTED = /\"((?:\\\\[\\x00-\\x7f]|[^\\x00-\\x08\\x0a-\\x1f\\x7f\"\\\\])*)\"/,\n    PARAM = new RegExp(TOKEN.source + '(?:=(?:' + TOKEN.source + '|' + QUOTED.source + '))?'),\n    EXT = new RegExp(TOKEN.source + '(?: *; *' + PARAM.source + ')*', 'g'),\n    EXT_LIST = new RegExp('^' + EXT.source + '(?: *, *' + EXT.source + ')*$'),\n    NUMBER = /^-?(0|[1-9][0-9]*)(\\.[0-9]+)?$/;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar Parser = {\n  parseHeader: function (header) {\n    var offers = new Offers();\n    if (header === '' || header === undefined) return offers;\n    if (!EXT_LIST.test(header)) throw new SyntaxError('Invalid Sec-WebSocket-Extensions header: ' + header);\n    var values = header.match(EXT);\n    values.forEach(function (value) {\n      var params = value.match(new RegExp(PARAM.source, 'g')),\n          name = params.shift(),\n          offer = {};\n      params.forEach(function (param) {\n        var args = param.match(PARAM),\n            key = args[1],\n            data;\n\n        if (args[2] !== undefined) {\n          data = args[2];\n        } else if (args[3] !== undefined) {\n          data = args[3].replace(/\\\\/g, '');\n        } else {\n          data = true;\n        }\n\n        if (NUMBER.test(data)) data = parseFloat(data);\n\n        if (hasOwnProperty.call(offer, key)) {\n          offer[key] = [].concat(offer[key]);\n          offer[key].push(data);\n        } else {\n          offer[key] = data;\n        }\n      }, this);\n      offers.push(name, offer);\n    }, this);\n    return offers;\n  },\n  serializeParams: function (name, params) {\n    var values = [];\n\n    var print = function (key, value) {\n      if (value instanceof Array) {\n        value.forEach(function (v) {\n          print(key, v);\n        });\n      } else if (value === true) {\n        values.push(key);\n      } else if (typeof value === 'number') {\n        values.push(key + '=' + value);\n      } else if (NOTOKEN.test(value)) {\n        values.push(key + '=\"' + value.replace(/\"/g, '\\\\\"') + '\"');\n      } else {\n        values.push(key + '=' + value);\n      }\n    };\n\n    for (var key in params) print(key, params[key]);\n\n    return [name].concat(values).join('; ');\n  }\n};\n\nvar Offers = function () {\n  this._byName = {};\n  this._inOrder = [];\n};\n\nOffers.prototype.push = function (name, params) {\n  if (!hasOwnProperty.call(this._byName, name)) this._byName[name] = [];\n\n  this._byName[name].push(params);\n\n  this._inOrder.push({\n    name: name,\n    params: params\n  });\n};\n\nOffers.prototype.eachOffer = function (callback, context) {\n  var list = this._inOrder;\n\n  for (var i = 0, n = list.length; i < n; i++) callback.call(context, list[i].name, list[i].params);\n};\n\nOffers.prototype.byName = function (name) {\n  return this._byName[name] || [];\n};\n\nOffers.prototype.toArray = function () {\n  return this._inOrder.slice();\n};\n\nmodule.exports = Parser;","map":{"version":3,"sources":["/home/lisa/VSProjects/react-pizza/react_pizza/node_modules/websocket-extensions/lib/parser.js"],"names":["TOKEN","NOTOKEN","QUOTED","PARAM","RegExp","source","EXT","EXT_LIST","NUMBER","hasOwnProperty","Object","prototype","Parser","parseHeader","header","offers","Offers","undefined","test","SyntaxError","values","match","forEach","value","params","name","shift","offer","param","args","key","data","replace","parseFloat","call","concat","push","serializeParams","print","Array","v","join","_byName","_inOrder","eachOffer","callback","context","list","i","n","length","byName","toArray","slice","module","exports"],"mappings":"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","sourcesContent":["'use strict';\n\nvar TOKEN    = /([!#\\$%&'\\*\\+\\-\\.\\^_`\\|~0-9A-Za-z]+)/,\n    NOTOKEN  = /([^!#\\$%&'\\*\\+\\-\\.\\^_`\\|~0-9A-Za-z])/g,\n    QUOTED   = /\"((?:\\\\[\\x00-\\x7f]|[^\\x00-\\x08\\x0a-\\x1f\\x7f\"\\\\])*)\"/,\n    PARAM    = new RegExp(TOKEN.source + '(?:=(?:' + TOKEN.source + '|' + QUOTED.source + '))?'),\n    EXT      = new RegExp(TOKEN.source + '(?: *; *' + PARAM.source + ')*', 'g'),\n    EXT_LIST = new RegExp('^' + EXT.source + '(?: *, *' + EXT.source + ')*$'),\n    NUMBER   = /^-?(0|[1-9][0-9]*)(\\.[0-9]+)?$/;\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nvar Parser = {\n  parseHeader: function(header) {\n    var offers = new Offers();\n    if (header === '' || header === undefined) return offers;\n\n    if (!EXT_LIST.test(header))\n      throw new SyntaxError('Invalid Sec-WebSocket-Extensions header: ' + header);\n\n    var values = header.match(EXT);\n\n    values.forEach(function(value) {\n      var params = value.match(new RegExp(PARAM.source, 'g')),\n          name   = params.shift(),\n          offer  = {};\n\n      params.forEach(function(param) {\n        var args = param.match(PARAM), key = args[1], data;\n\n        if (args[2] !== undefined) {\n          data = args[2];\n        } else if (args[3] !== undefined) {\n          data = args[3].replace(/\\\\/g, '');\n        } else {\n          data = true;\n        }\n        if (NUMBER.test(data)) data = parseFloat(data);\n\n        if (hasOwnProperty.call(offer, key)) {\n          offer[key] = [].concat(offer[key]);\n          offer[key].push(data);\n        } else {\n          offer[key] = data;\n        }\n      }, this);\n      offers.push(name, offer);\n    }, this);\n\n    return offers;\n  },\n\n  serializeParams: function(name, params) {\n    var values = [];\n\n    var print = function(key, value) {\n      if (value instanceof Array) {\n        value.forEach(function(v) { print(key, v) });\n      } else if (value === true) {\n        values.push(key);\n      } else if (typeof value === 'number') {\n        values.push(key + '=' + value);\n      } else if (NOTOKEN.test(value)) {\n        values.push(key + '=\"' + value.replace(/\"/g, '\\\\\"') + '\"');\n      } else {\n        values.push(key + '=' + value);\n      }\n    };\n\n    for (var key in params) print(key, params[key]);\n\n    return [name].concat(values).join('; ');\n  }\n};\n\nvar Offers = function() {\n  this._byName  = {};\n  this._inOrder = [];\n};\n\nOffers.prototype.push = function(name, params) {\n  if (!hasOwnProperty.call(this._byName, name))\n    this._byName[name] = [];\n\n  this._byName[name].push(params);\n  this._inOrder.push({ name: name, params: params });\n};\n\nOffers.prototype.eachOffer = function(callback, context) {\n  var list = this._inOrder;\n  for (var i = 0, n = list.length; i < n; i++)\n    callback.call(context, list[i].name, list[i].params);\n};\n\nOffers.prototype.byName = function(name) {\n  return this._byName[name] || [];\n};\n\nOffers.prototype.toArray = function() {\n  return this._inOrder.slice();\n};\n\nmodule.exports = Parser;\n"]},"metadata":{},"sourceType":"script"}