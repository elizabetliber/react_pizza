{"ast":null,"code":"// Generated by CoffeeScript 1.12.7\n(function () {\n  var XhrPollingReceiver,\n      XhrStreamingReceiver,\n      transport,\n      utils,\n      extend = function (child, parent) {\n    for (var key in parent) {\n      if (hasProp.call(parent, key)) child[key] = parent[key];\n    }\n\n    function ctor() {\n      this.constructor = child;\n    }\n\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  },\n      hasProp = {}.hasOwnProperty;\n\n  transport = require('./transport');\n  utils = require('./utils');\n\n  XhrStreamingReceiver = function (superClass) {\n    extend(XhrStreamingReceiver, superClass);\n\n    function XhrStreamingReceiver() {\n      return XhrStreamingReceiver.__super__.constructor.apply(this, arguments);\n    }\n\n    XhrStreamingReceiver.prototype.protocol = \"xhr-streaming\";\n\n    XhrStreamingReceiver.prototype.doSendFrame = function (payload) {\n      return XhrStreamingReceiver.__super__.doSendFrame.call(this, payload + '\\n');\n    };\n\n    return XhrStreamingReceiver;\n  }(transport.ResponseReceiver);\n\n  XhrPollingReceiver = function (superClass) {\n    extend(XhrPollingReceiver, superClass);\n\n    function XhrPollingReceiver() {\n      return XhrPollingReceiver.__super__.constructor.apply(this, arguments);\n    }\n\n    XhrPollingReceiver.prototype.protocol = \"xhr-polling\";\n    XhrPollingReceiver.prototype.max_response_size = 1;\n    return XhrPollingReceiver;\n  }(XhrStreamingReceiver);\n\n  exports.app = {\n    xhr_options: function (req, res) {\n      res.statusCode = 204;\n      res.setHeader('Access-Control-Allow-Methods', 'OPTIONS, POST');\n      res.setHeader('Access-Control-Max-Age', res.cache_for);\n      return '';\n    },\n    xhr_send: function (req, res, data) {\n      var d, i, jsonp, len, message, x;\n\n      if (!data) {\n        throw {\n          status: 500,\n          message: 'Payload expected.'\n        };\n      }\n\n      try {\n        d = JSON.parse(data);\n      } catch (error) {\n        x = error;\n        throw {\n          status: 500,\n          message: 'Broken JSON encoding.'\n        };\n      }\n\n      if (!d || d.__proto__.constructor !== Array) {\n        throw {\n          status: 500,\n          message: 'Payload expected.'\n        };\n      }\n\n      jsonp = transport.Session.bySessionId(req.session);\n\n      if (!jsonp) {\n        throw {\n          status: 404\n        };\n      }\n\n      for (i = 0, len = d.length; i < len; i++) {\n        message = d[i];\n        jsonp.didMessage(message);\n      }\n\n      res.setHeader('Content-Type', 'text/plain; charset=UTF-8');\n      res.writeHead(204);\n      res.end();\n      return true;\n    },\n    xhr_cors: function (req, res, content) {\n      var headers, origin;\n\n      if (this.options.disable_cors) {\n        return content;\n      }\n\n      if (!req.headers['origin']) {\n        origin = '*';\n      } else {\n        origin = req.headers['origin'];\n        res.setHeader('Access-Control-Allow-Credentials', 'true');\n      }\n\n      res.setHeader('Access-Control-Allow-Origin', origin);\n      res.setHeader('Vary', 'Origin');\n      headers = req.headers['access-control-request-headers'];\n\n      if (headers) {\n        res.setHeader('Access-Control-Allow-Headers', headers);\n      }\n\n      return content;\n    },\n    xhr_poll: function (req, res, _, next_filter) {\n      res.setHeader('Content-Type', 'application/javascript; charset=UTF-8');\n      res.writeHead(200);\n      transport.register(req, this, new XhrPollingReceiver(req, res, this.options));\n      return true;\n    },\n    xhr_streaming: function (req, res, _, next_filter) {\n      res.setHeader('Content-Type', 'application/javascript; charset=UTF-8');\n      res.writeHead(200);\n      res.write(Array(2049).join('h') + '\\n');\n      transport.register(req, this, new XhrStreamingReceiver(req, res, this.options));\n      return true;\n    }\n  };\n}).call(this);","map":{"version":3,"sources":["/home/lisa/VSProjects/react-pizza/react_pizza/node_modules/sockjs/lib/trans-xhr.js"],"names":["XhrPollingReceiver","XhrStreamingReceiver","transport","utils","extend","child","parent","key","hasProp","call","ctor","constructor","prototype","__super__","hasOwnProperty","require","superClass","apply","arguments","protocol","doSendFrame","payload","ResponseReceiver","max_response_size","exports","app","xhr_options","req","res","statusCode","setHeader","cache_for","xhr_send","data","d","i","jsonp","len","message","x","status","JSON","parse","error","__proto__","Array","Session","bySessionId","session","length","didMessage","writeHead","end","xhr_cors","content","headers","origin","options","disable_cors","xhr_poll","_","next_filter","register","xhr_streaming","write","join"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.12.7\n(function() {\n  var XhrPollingReceiver, XhrStreamingReceiver, transport, utils,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  transport = require('./transport');\n\n  utils = require('./utils');\n\n  XhrStreamingReceiver = (function(superClass) {\n    extend(XhrStreamingReceiver, superClass);\n\n    function XhrStreamingReceiver() {\n      return XhrStreamingReceiver.__super__.constructor.apply(this, arguments);\n    }\n\n    XhrStreamingReceiver.prototype.protocol = \"xhr-streaming\";\n\n    XhrStreamingReceiver.prototype.doSendFrame = function(payload) {\n      return XhrStreamingReceiver.__super__.doSendFrame.call(this, payload + '\\n');\n    };\n\n    return XhrStreamingReceiver;\n\n  })(transport.ResponseReceiver);\n\n  XhrPollingReceiver = (function(superClass) {\n    extend(XhrPollingReceiver, superClass);\n\n    function XhrPollingReceiver() {\n      return XhrPollingReceiver.__super__.constructor.apply(this, arguments);\n    }\n\n    XhrPollingReceiver.prototype.protocol = \"xhr-polling\";\n\n    XhrPollingReceiver.prototype.max_response_size = 1;\n\n    return XhrPollingReceiver;\n\n  })(XhrStreamingReceiver);\n\n  exports.app = {\n    xhr_options: function(req, res) {\n      res.statusCode = 204;\n      res.setHeader('Access-Control-Allow-Methods', 'OPTIONS, POST');\n      res.setHeader('Access-Control-Max-Age', res.cache_for);\n      return '';\n    },\n    xhr_send: function(req, res, data) {\n      var d, i, jsonp, len, message, x;\n      if (!data) {\n        throw {\n          status: 500,\n          message: 'Payload expected.'\n        };\n      }\n      try {\n        d = JSON.parse(data);\n      } catch (error) {\n        x = error;\n        throw {\n          status: 500,\n          message: 'Broken JSON encoding.'\n        };\n      }\n      if (!d || d.__proto__.constructor !== Array) {\n        throw {\n          status: 500,\n          message: 'Payload expected.'\n        };\n      }\n      jsonp = transport.Session.bySessionId(req.session);\n      if (!jsonp) {\n        throw {\n          status: 404\n        };\n      }\n      for (i = 0, len = d.length; i < len; i++) {\n        message = d[i];\n        jsonp.didMessage(message);\n      }\n      res.setHeader('Content-Type', 'text/plain; charset=UTF-8');\n      res.writeHead(204);\n      res.end();\n      return true;\n    },\n    xhr_cors: function(req, res, content) {\n      var headers, origin;\n      if (this.options.disable_cors) {\n        return content;\n      }\n      if (!req.headers['origin']) {\n        origin = '*';\n      } else {\n        origin = req.headers['origin'];\n        res.setHeader('Access-Control-Allow-Credentials', 'true');\n      }\n      res.setHeader('Access-Control-Allow-Origin', origin);\n      res.setHeader('Vary', 'Origin');\n      headers = req.headers['access-control-request-headers'];\n      if (headers) {\n        res.setHeader('Access-Control-Allow-Headers', headers);\n      }\n      return content;\n    },\n    xhr_poll: function(req, res, _, next_filter) {\n      res.setHeader('Content-Type', 'application/javascript; charset=UTF-8');\n      res.writeHead(200);\n      transport.register(req, this, new XhrPollingReceiver(req, res, this.options));\n      return true;\n    },\n    xhr_streaming: function(req, res, _, next_filter) {\n      res.setHeader('Content-Type', 'application/javascript; charset=UTF-8');\n      res.writeHead(200);\n      res.write(Array(2049).join('h') + '\\n');\n      transport.register(req, this, new XhrStreamingReceiver(req, res, this.options));\n      return true;\n    }\n  };\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}