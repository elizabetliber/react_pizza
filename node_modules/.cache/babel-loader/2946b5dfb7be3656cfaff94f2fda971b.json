{"ast":null,"code":"module.exports = function makeKillable(server) {\n  var sockets = [];\n  server.on('connection', function (socket) {\n    //add socket to list\n    sockets.push(socket);\n    socket.once('close', function () {\n      //remove socket from list\n      sockets.splice(sockets.indexOf(socket), 1);\n    });\n  });\n\n  server.kill = function (cb) {\n    server.close(cb);\n    sockets.forEach(function (socket) {\n      socket.destroy();\n    }); // reset so the server can be restarted\n\n    sockets = [];\n  };\n\n  return server;\n};","map":{"version":3,"sources":["/home/lisa/VSProjects/react-pizza/react_pizza/node_modules/killable/index.js"],"names":["module","exports","makeKillable","server","sockets","on","socket","push","once","splice","indexOf","kill","cb","close","forEach","destroy"],"mappings":"AAAAA,MAAM,CAACC,OAAP,GAAiB,SAASC,YAAT,CAAsBC,MAAtB,EAA8B;AAC7C,MAAIC,OAAO,GAAG,EAAd;AAEAD,EAAAA,MAAM,CAACE,EAAP,CAAU,YAAV,EAAwB,UAAUC,MAAV,EAAkB;AACxC;AACAF,IAAAA,OAAO,CAACG,IAAR,CAAaD,MAAb;AAEAA,IAAAA,MAAM,CAACE,IAAP,CAAY,OAAZ,EAAqB,YAAY;AAC/B;AACAJ,MAAAA,OAAO,CAACK,MAAR,CAAeL,OAAO,CAACM,OAAR,CAAgBJ,MAAhB,CAAf,EAAwC,CAAxC;AACD,KAHD;AAID,GARD;;AAUAH,EAAAA,MAAM,CAACQ,IAAP,GAAc,UAAUC,EAAV,EAAc;AAC1BT,IAAAA,MAAM,CAACU,KAAP,CAAaD,EAAb;AACAR,IAAAA,OAAO,CAACU,OAAR,CAAgB,UAAUR,MAAV,EAAkB;AAChCA,MAAAA,MAAM,CAACS,OAAP;AACD,KAFD,EAF0B,CAK1B;;AACAX,IAAAA,OAAO,GAAG,EAAV;AACD,GAPD;;AASA,SAAOD,MAAP;AACD,CAvBD","sourcesContent":["module.exports = function makeKillable(server) {\n  var sockets = [];\n\n  server.on('connection', function (socket) {\n    //add socket to list\n    sockets.push(socket);\n\n    socket.once('close', function () {\n      //remove socket from list\n      sockets.splice(sockets.indexOf(socket), 1);\n    });\n  });\n\n  server.kill = function (cb) {\n    server.close(cb);\n    sockets.forEach(function (socket) {\n      socket.destroy();\n    });\n    // reset so the server can be restarted\n    sockets = [];\n  };\n\n  return server;\n};\n"]},"metadata":{},"sourceType":"script"}