{"ast":null,"code":"// Generated by CoffeeScript 1.12.7\n(function () {\n  var EventSourceReceiver,\n      transport,\n      utils,\n      extend = function (child, parent) {\n    for (var key in parent) {\n      if (hasProp.call(parent, key)) child[key] = parent[key];\n    }\n\n    function ctor() {\n      this.constructor = child;\n    }\n\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  },\n      hasProp = {}.hasOwnProperty;\n\n  utils = require('./utils');\n  transport = require('./transport');\n\n  EventSourceReceiver = function (superClass) {\n    extend(EventSourceReceiver, superClass);\n\n    function EventSourceReceiver() {\n      return EventSourceReceiver.__super__.constructor.apply(this, arguments);\n    }\n\n    EventSourceReceiver.prototype.protocol = \"eventsource\";\n\n    EventSourceReceiver.prototype.doSendFrame = function (payload) {\n      var data;\n      data = ['data: ', utils.escape_selected(payload, '\\r\\n\\x00'), '\\r\\n\\r\\n'];\n      return EventSourceReceiver.__super__.doSendFrame.call(this, data.join(''));\n    };\n\n    return EventSourceReceiver;\n  }(transport.ResponseReceiver);\n\n  exports.app = {\n    eventsource: function (req, res) {\n      var headers, origin;\n\n      if (!req.headers['origin'] || req.headers['origin'] === 'null') {\n        origin = '*';\n      } else {\n        origin = req.headers['origin'];\n        res.setHeader('Access-Control-Allow-Credentials', 'true');\n      }\n\n      res.setHeader('Content-Type', 'text/event-stream');\n      res.setHeader('Access-Control-Allow-Origin', origin);\n      res.setHeader('Vary', 'Origin');\n      headers = req.headers['access-control-request-headers'];\n\n      if (headers) {\n        res.setHeader('Access-Control-Allow-Headers', headers);\n      }\n\n      res.writeHead(200);\n      res.write('\\r\\n');\n      transport.register(req, this, new EventSourceReceiver(req, res, this.options));\n      return true;\n    }\n  };\n}).call(this);","map":{"version":3,"sources":["/home/lisa/VSProjects/react-pizza/react_pizza/node_modules/sockjs/lib/trans-eventsource.js"],"names":["EventSourceReceiver","transport","utils","extend","child","parent","key","hasProp","call","ctor","constructor","prototype","__super__","hasOwnProperty","require","superClass","apply","arguments","protocol","doSendFrame","payload","data","escape_selected","join","ResponseReceiver","exports","app","eventsource","req","res","headers","origin","setHeader","writeHead","write","register","options"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.12.7\n(function() {\n  var EventSourceReceiver, transport, utils,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  utils = require('./utils');\n\n  transport = require('./transport');\n\n  EventSourceReceiver = (function(superClass) {\n    extend(EventSourceReceiver, superClass);\n\n    function EventSourceReceiver() {\n      return EventSourceReceiver.__super__.constructor.apply(this, arguments);\n    }\n\n    EventSourceReceiver.prototype.protocol = \"eventsource\";\n\n    EventSourceReceiver.prototype.doSendFrame = function(payload) {\n      var data;\n      data = ['data: ', utils.escape_selected(payload, '\\r\\n\\x00'), '\\r\\n\\r\\n'];\n      return EventSourceReceiver.__super__.doSendFrame.call(this, data.join(''));\n    };\n\n    return EventSourceReceiver;\n\n  })(transport.ResponseReceiver);\n\n  exports.app = {\n    eventsource: function(req, res) {\n      var headers, origin;\n      if (!req.headers['origin'] || req.headers['origin'] === 'null') {\n        origin = '*';\n      } else {\n        origin = req.headers['origin'];\n        res.setHeader('Access-Control-Allow-Credentials', 'true');\n      }\n      res.setHeader('Content-Type', 'text/event-stream');\n      res.setHeader('Access-Control-Allow-Origin', origin);\n      res.setHeader('Vary', 'Origin');\n      headers = req.headers['access-control-request-headers'];\n      if (headers) {\n        res.setHeader('Access-Control-Allow-Headers', headers);\n      }\n      res.writeHead(200);\n      res.write('\\r\\n');\n      transport.register(req, this, new EventSourceReceiver(req, res, this.options));\n      return true;\n    }\n  };\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}