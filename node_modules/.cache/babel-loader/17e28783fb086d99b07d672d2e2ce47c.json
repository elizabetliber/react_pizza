{"ast":null,"code":"// Generated by CoffeeScript 1.12.7\n(function () {\n  var JsonpReceiver,\n      transport,\n      extend = function (child, parent) {\n    for (var key in parent) {\n      if (hasProp.call(parent, key)) child[key] = parent[key];\n    }\n\n    function ctor() {\n      this.constructor = child;\n    }\n\n    ctor.prototype = parent.prototype;\n    child.prototype = new ctor();\n    child.__super__ = parent.prototype;\n    return child;\n  },\n      hasProp = {}.hasOwnProperty;\n\n  transport = require('./transport');\n\n  JsonpReceiver = function (superClass) {\n    extend(JsonpReceiver, superClass);\n    JsonpReceiver.prototype.protocol = \"jsonp-polling\";\n    JsonpReceiver.prototype.max_response_size = 1;\n\n    function JsonpReceiver(req, res, options, callback1) {\n      this.callback = callback1;\n\n      JsonpReceiver.__super__.constructor.call(this, req, res, options);\n    }\n\n    JsonpReceiver.prototype.doSendFrame = function (payload) {\n      return JsonpReceiver.__super__.doSendFrame.call(this, \"/**/\" + this.callback + \"(\" + JSON.stringify(payload) + \");\\r\\n\");\n    };\n\n    return JsonpReceiver;\n  }(transport.ResponseReceiver);\n\n  exports.app = {\n    jsonp: function (req, res, _, next_filter) {\n      var callback;\n\n      if (!('c' in req.query || 'callback' in req.query)) {\n        throw {\n          status: 500,\n          message: '\"callback\" parameter required'\n        };\n      }\n\n      callback = 'c' in req.query ? req.query['c'] : req.query['callback'];\n\n      if (/[^a-zA-Z0-9-_.]/.test(callback) || callback.length > 32) {\n        throw {\n          status: 500,\n          message: 'invalid \"callback\" parameter'\n        };\n      }\n\n      res.setHeader('X-Content-Type-Options', 'nosniff');\n      res.setHeader('Content-Type', 'application/javascript; charset=UTF-8');\n      res.writeHead(200);\n      transport.register(req, this, new JsonpReceiver(req, res, this.options, callback));\n      return true;\n    },\n    jsonp_send: function (req, res, query) {\n      var d, i, jsonp, len, message, x;\n\n      if (!query) {\n        throw {\n          status: 500,\n          message: 'Payload expected.'\n        };\n      }\n\n      if (typeof query === 'string') {\n        try {\n          d = JSON.parse(query);\n        } catch (error) {\n          x = error;\n          throw {\n            status: 500,\n            message: 'Broken JSON encoding.'\n          };\n        }\n      } else {\n        d = query.d;\n      }\n\n      if (typeof d === 'string' && d) {\n        try {\n          d = JSON.parse(d);\n        } catch (error) {\n          x = error;\n          throw {\n            status: 500,\n            message: 'Broken JSON encoding.'\n          };\n        }\n      }\n\n      if (!d || d.__proto__.constructor !== Array) {\n        throw {\n          status: 500,\n          message: 'Payload expected.'\n        };\n      }\n\n      jsonp = transport.Session.bySessionId(req.session);\n\n      if (jsonp === null) {\n        throw {\n          status: 404\n        };\n      }\n\n      for (i = 0, len = d.length; i < len; i++) {\n        message = d[i];\n        jsonp.didMessage(message);\n      }\n\n      res.setHeader('Content-Length', '2');\n      res.setHeader('Content-Type', 'text/plain; charset=UTF-8');\n      res.writeHead(200);\n      res.end('ok');\n      return true;\n    }\n  };\n}).call(this);","map":{"version":3,"sources":["/home/lisa/VSProjects/react-pizza/react_pizza/node_modules/sockjs/lib/trans-jsonp.js"],"names":["JsonpReceiver","transport","extend","child","parent","key","hasProp","call","ctor","constructor","prototype","__super__","hasOwnProperty","require","superClass","protocol","max_response_size","req","res","options","callback1","callback","doSendFrame","payload","JSON","stringify","ResponseReceiver","exports","app","jsonp","_","next_filter","query","status","message","test","length","setHeader","writeHead","register","jsonp_send","d","i","len","x","parse","error","__proto__","Array","Session","bySessionId","session","didMessage","end"],"mappings":"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","sourcesContent":["// Generated by CoffeeScript 1.12.7\n(function() {\n  var JsonpReceiver, transport,\n    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },\n    hasProp = {}.hasOwnProperty;\n\n  transport = require('./transport');\n\n  JsonpReceiver = (function(superClass) {\n    extend(JsonpReceiver, superClass);\n\n    JsonpReceiver.prototype.protocol = \"jsonp-polling\";\n\n    JsonpReceiver.prototype.max_response_size = 1;\n\n    function JsonpReceiver(req, res, options, callback1) {\n      this.callback = callback1;\n      JsonpReceiver.__super__.constructor.call(this, req, res, options);\n    }\n\n    JsonpReceiver.prototype.doSendFrame = function(payload) {\n      return JsonpReceiver.__super__.doSendFrame.call(this, \"/**/\" + this.callback + \"(\" + JSON.stringify(payload) + \");\\r\\n\");\n    };\n\n    return JsonpReceiver;\n\n  })(transport.ResponseReceiver);\n\n  exports.app = {\n    jsonp: function(req, res, _, next_filter) {\n      var callback;\n      if (!('c' in req.query || 'callback' in req.query)) {\n        throw {\n          status: 500,\n          message: '\"callback\" parameter required'\n        };\n      }\n      callback = 'c' in req.query ? req.query['c'] : req.query['callback'];\n      if (/[^a-zA-Z0-9-_.]/.test(callback) || callback.length > 32) {\n        throw {\n          status: 500,\n          message: 'invalid \"callback\" parameter'\n        };\n      }\n      res.setHeader('X-Content-Type-Options', 'nosniff');\n      res.setHeader('Content-Type', 'application/javascript; charset=UTF-8');\n      res.writeHead(200);\n      transport.register(req, this, new JsonpReceiver(req, res, this.options, callback));\n      return true;\n    },\n    jsonp_send: function(req, res, query) {\n      var d, i, jsonp, len, message, x;\n      if (!query) {\n        throw {\n          status: 500,\n          message: 'Payload expected.'\n        };\n      }\n      if (typeof query === 'string') {\n        try {\n          d = JSON.parse(query);\n        } catch (error) {\n          x = error;\n          throw {\n            status: 500,\n            message: 'Broken JSON encoding.'\n          };\n        }\n      } else {\n        d = query.d;\n      }\n      if (typeof d === 'string' && d) {\n        try {\n          d = JSON.parse(d);\n        } catch (error) {\n          x = error;\n          throw {\n            status: 500,\n            message: 'Broken JSON encoding.'\n          };\n        }\n      }\n      if (!d || d.__proto__.constructor !== Array) {\n        throw {\n          status: 500,\n          message: 'Payload expected.'\n        };\n      }\n      jsonp = transport.Session.bySessionId(req.session);\n      if (jsonp === null) {\n        throw {\n          status: 404\n        };\n      }\n      for (i = 0, len = d.length; i < len; i++) {\n        message = d[i];\n        jsonp.didMessage(message);\n      }\n      res.setHeader('Content-Length', '2');\n      res.setHeader('Content-Type', 'text/plain; charset=UTF-8');\n      res.writeHead(200);\n      res.end('ok');\n      return true;\n    }\n  };\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}